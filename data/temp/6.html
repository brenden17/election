<!DOCTYPE html>
<html lang="en">
<head>
    <title>대통령 선거 결과</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/dc.css"/>
</head>
<body>
<h1>대통령 선거 결과</h1>

<div id="chart-bar-local" class="row-graph span12">
    <div class="title">지역별 투표수</div>
</div>

<div id="chart-ring-year" class="chart">
    <div class="title">년도별 투표수</div>
</div>
<div id="chart-ring-party" class="chart">
    <div class="title">정당별 투표</div>
</div>

<div id="chart-data-table" class="chart">
    <div class="title">Date table</div>
    <tr class="header">
            <th>Date</th>
            <th>Open</th>
            <th>Close</th>
            <th>Change</th>
            <th>Volume</th>
        </tr>
</div>



<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js" type="text/javascript"></script> -->
<script type="text/javascript" src="js/d3.min.js"></script>
<script type="text/javascript" src="js/crossfilter.min.js"></script>
<script type="text/javascript" src="js/dc.min.js"></script>
<script type="text/javascript">
    var data = 
[
{date: "2012/12", co: 18.0, local: "서울", party: "여당", score: 3024572.0},
{date: "2012/12", co: 18.0, local: "서울", party: "야당", score: 3227639.0},
{date: "2012/12", co: 18.0, local: "서울", party: "기타", score: 24488.0},
{date: "2012/12", co: 18.0, local: "인천", party: "여당", score: 852600.0},
{date: "2012/12", co: 18.0, local: "인천", party: "야당", score: 794213.0},
{date: "2012/12", co: 18.0, local: "인천", party: "기타", score: 6153.0},
{date: "2012/12", co: 18.0, local: "경기", party: "여당", score: 3528915.0},
{date: "2012/12", co: 18.0, local: "경기", party: "야당", score: 3442084.0},
{date: "2012/12", co: 18.0, local: "경기", party: "기타", score: 25724.0},
{date: "2012/12", co: 18.0, local: "강원", party: "여당", score: 562876.0},
{date: "2012/12", co: 18.0, local: "강원", party: "야당", score: 340870.0},
{date: "2012/12", co: 18.0, local: "강원", party: "기타", score: 4508.0},
{date: "2012/12", co: 18.0, local: "세종", party: "여당", score: 33587.0},
{date: "2012/12", co: 18.0, local: "세종", party: "야당", score: 30787.0},
{date: "2012/12", co: 18.0, local: "세종", party: "기타", score: 323.0},
{date: "2012/12", co: 18.0, local: "대전", party: "여당", score: 450576.0},
{date: "2012/12", co: 18.0, local: "대전", party: "야당", score: 448310.0},
{date: "2012/12", co: 18.0, local: "대전", party: "기타", score: 2992.0},
{date: "2012/12", co: 18.0, local: "충남", party: "여당", score: 658928.0},
{date: "2012/12", co: 18.0, local: "충남", party: "야당", score: 497630.0},
{date: "2012/12", co: 18.0, local: "충남", party: "기타", score: 6378.0},
{date: "2012/12", co: 18.0, local: "충북", party: "여당", score: 518442.0},
{date: "2012/12", co: 18.0, local: "충북", party: "야당", score: 398907.0},
{date: "2012/12", co: 18.0, local: "충북", party: "기타", score: 4704.0},
{date: "2012/12", co: 18.0, local: "광주", party: "여당", score: 69574.0},
{date: "2012/12", co: 18.0, local: "광주", party: "야당", score: 823737.0},
{date: "2012/12", co: 18.0, local: "광주", party: "기타", score: 2275.0},
{date: "2012/12", co: 18.0, local: "전남", party: "여당", score: 116296.0},
{date: "2012/12", co: 18.0, local: "전남", party: "야당", score: 1038347.0},
{date: "2012/12", co: 18.0, local: "전남", party: "기타", score: 8316.0},
{date: "2012/12", co: 18.0, local: "전북", party: "여당", score: 150315.0},
{date: "2012/12", co: 18.0, local: "전북", party: "야당", score: 980322.0},
{date: "2012/12", co: 18.0, local: "전북", party: "기타", score: 5938.0},
{date: "2012/12", co: 18.0, local: "부산", party: "여당", score: 1324159.0},
{date: "2012/12", co: 18.0, local: "부산", party: "야당", score: 882511.0},
{date: "2012/12", co: 18.0, local: "부산", party: "기타", score: 6735.0},
{date: "2012/12", co: 18.0, local: "울산", party: "여당", score: 413977.0},
{date: "2012/12", co: 18.0, local: "울산", party: "야당", score: 275451.0},
{date: "2012/12", co: 18.0, local: "울산", party: "기타", score: 3005.0},
{date: "2012/12", co: 18.0, local: "경남", party: "여당", score: 1259174.0},
{date: "2012/12", co: 18.0, local: "경남", party: "야당", score: 724896.0},
{date: "2012/12", co: 18.0, local: "경남", party: "기타", score: 10701.0},
{date: "2012/12", co: 18.0, local: "대구", party: "여당", score: 1267789.0},
{date: "2012/12", co: 18.0, local: "대구", party: "야당", score: 309034.0},
{date: "2012/12", co: 18.0, local: "대구", party: "기타", score: 5017.0},
{date: "2012/12", co: 18.0, local: "경북", party: "여당", score: 1375164.0},
{date: "2012/12", co: 18.0, local: "경북", party: "야당", score: 316659.0},
{date: "2012/12", co: 18.0, local: "경북", party: "기타", score: 9688.0},
{date: "2012/12", co: 18.0, local: "제주", party: "여당", score: 166184.0},
{date: "2012/12", co: 18.0, local: "제주", party: "야당", score: 161235.0},
{date: "2012/12", co: 18.0, local: "제주", party: "기타", score: 1916.0},
{date: "2012/12", co: 18.0, local: "재외", party: "여당", score: 67319.0},
{date: "2012/12", co: 18.0, local: "재외", party: "야당", score: 89192.0},
{date: "2012/12", co: 18.0, local: "재외", party: "기타", score: 1685.0},
{date: "2007/12", co: 17.0, local: "서울", party: "여당", score: 1237812.0},
{date: "2007/12", co: 17.0, local: "서울", party: "야당", score: 2689162.0},
{date: "2007/12", co: 17.0, local: "서울", party: "기타", score: 1124395.0},
{date: "2007/12", co: 17.0, local: "인천", party: "여당", score: 286565.0},
{date: "2007/12", co: 17.0, local: "인천", party: "야당", score: 593283.0},
{date: "2007/12", co: 17.0, local: "인천", party: "기타", score: 325509.0},
{date: "2007/12", co: 17.0, local: "경기", party: "여당", score: 1181936.0},
{date: "2007/12", co: 17.0, local: "경기", party: "야당", score: 2603443.0},
{date: "2007/12", co: 17.0, local: "경기", party: "기타", score: 1232028.0},
{date: "2007/12", co: 17.0, local: "강원", party: "여당", score: 136668.0},
{date: "2007/12", co: 17.0, local: "강원", party: "야당", score: 376004.0},
{date: "2007/12", co: 17.0, local: "강원", party: "기타", score: 210831.0},
{date: "2007/12", co: 17.0, local: "대전", party: "여당", score: 159700.0},
{date: "2007/12", co: 17.0, local: "대전", party: "야당", score: 246008.0},
{date: "2007/12", co: 17.0, local: "대전", party: "기타", score: 272240.0},
{date: "2007/12", co: 17.0, local: "충남", party: "여당", score: 192999.0},
{date: "2007/12", co: 17.0, local: "충남", party: "야당", score: 313693.0},
{date: "2007/12", co: 17.0, local: "충남", party: "기타", score: 408813.0},
{date: "2007/12", co: 17.0, local: "충북", party: "여당", score: 165637.0},
{date: "2007/12", co: 17.0, local: "충북", party: "야당", score: 289499.0},
{date: "2007/12", co: 17.0, local: "충북", party: "기타", score: 240960.0},
{date: "2007/12", co: 17.0, local: "광주", party: "여당", score: 527588.0},
{date: "2007/12", co: 17.0, local: "광주", party: "야당", score: 56875.0},
{date: "2007/12", co: 17.0, local: "광주", party: "기타", score: 77089.0},
{date: "2007/12", co: 17.0, local: "전남", party: "여당", score: 757309.0},
{date: "2007/12", co: 17.0, local: "전남", party: "야당", score: 88834.0},
{date: "2007/12", co: 17.0, local: "전남", party: "기타", score: 116708.0},
{date: "2007/12", co: 17.0, local: "전북", party: "여당", score: 777236.0},
{date: "2007/12", co: 17.0, local: "전북", party: "야당", score: 86149.0},
{date: "2007/12", co: 17.0, local: "전북", party: "기타", score: 88967.0},
{date: "2007/12", co: 17.0, local: "부산", party: "여당", score: 236708.0},
{date: "2007/12", co: 17.0, local: "부산", party: "야당", score: 1018715.0},
{date: "2007/12", co: 17.0, local: "부산", party: "기타", score: 977245.0},
{date: "2007/12", co: 17.0, local: "울산", party: "여당", score: 70736.0},
{date: "2007/12", co: 17.0, local: "울산", party: "야당", score: 279891.0},
{date: "2007/12", co: 17.0, local: "울산", party: "기타", score: 167959.0},
{date: "2007/12", co: 17.0, local: "대구", party: "여당", score: 75932.0},
{date: "2007/12", co: 17.0, local: "대구", party: "야당", score: 876719.0},
{date: "2007/12", co: 17.0, local: "대구", party: "기타", score: 311027.0},
{date: "2007/12", co: 17.0, local: "경남", party: "여당", score: 189463.0},
{date: "2007/12", co: 17.0, local: "경남", party: "야당", score: 843662.0},
{date: "2007/12", co: 17.0, local: "경남", party: "기타", score: 500205.0},
{date: "2007/12", co: 17.0, local: "경북", party: "여당", score: 96822.0},
{date: "2007/12", co: 17.0, local: "경북", party: "야당", score: 1033957.0},
{date: "2007/12", co: 17.0, local: "경북", party: "기타", score: 293693.0},
{date: "2007/12", co: 17.0, local: "제주", party: "여당", score: 81570.0},
{date: "2007/12", co: 17.0, local: "제주", party: "야당", score: 96495.0},
{date: "2007/12", co: 17.0, local: "제주", party: "기타", score: 71457.0},
{date: "2002/12", co: 16.0, local: "서울", party: "야당", score: 2447376.0},
{date: "2002/12", co: 16.0, local: "서울", party: "여당", score: 2792957.0},
{date: "2002/12", co: 16.0, local: "서울", party: "기타", score: 203657.0},
{date: "2002/12", co: 16.0, local: "인천", party: "야당", score: 547205.0},
{date: "2002/12", co: 16.0, local: "인천", party: "여당", score: 611786.0},
{date: "2002/12", co: 16.0, local: "인천", party: "기타", score: 68825.0},
{date: "2002/12", co: 16.0, local: "경기", party: "야당", score: 2120191.0},
{date: "2002/12", co: 16.0, local: "경기", party: "여당", score: 2430193.0},
{date: "2002/12", co: 16.0, local: "경기", party: "기타", score: 247622.0},
{date: "2002/12", co: 16.0, local: "강원", party: "야당", score: 400405.0},
{date: "2002/12", co: 16.0, local: "강원", party: "여당", score: 316004.0},
{date: "2002/12", co: 16.0, local: "강원", party: "기타", score: 46528.0},
{date: "2002/12", co: 16.0, local: "대전", party: "야당", score: 266760.0},
{date: "2002/12", co: 16.0, local: "대전", party: "여당", score: 369046.0},
{date: "2002/12", co: 16.0, local: "대전", party: "기타", score: 34040.0},
{date: "2002/12", co: 16.0, local: "충남", party: "야당", score: 375110.0},
{date: "2002/12", co: 16.0, local: "충남", party: "여당", score: 474531.0},
{date: "2002/12", co: 16.0, local: "충남", party: "기타", score: 60177.0},
{date: "2002/12", co: 16.0, local: "충북", party: "야당", score: 311044.0},
{date: "2002/12", co: 16.0, local: "충북", party: "여당", score: 365623.0},
{date: "2002/12", co: 16.0, local: "충북", party: "기타", score: 48495.0},
{date: "2002/12", co: 16.0, local: "광주", party: "야당", score: 26869.0},
{date: "2002/12", co: 16.0, local: "광주", party: "여당", score: 715181.0},
{date: "2002/12", co: 16.0, local: "광주", party: "기타", score: 9366.0},
{date: "2002/12", co: 16.0, local: "전남", party: "야당", score: 53074.0},
{date: "2002/12", co: 16.0, local: "전남", party: "여당", score: 1070506.0},
{date: "2002/12", co: 16.0, local: "전남", party: "기타", score: 22740.0},
{date: "2002/12", co: 16.0, local: "전북", party: "야당", score: 65334.0},
{date: "2002/12", co: 16.0, local: "전북", party: "여당", score: 966053.0},
{date: "2002/12", co: 16.0, local: "전북", party: "기타", score: 23413.0},
{date: "2002/12", co: 16.0, local: "부산", party: "야당", score: 1314274.0},
{date: "2002/12", co: 16.0, local: "부산", party: "여당", score: 587946.0},
{date: "2002/12", co: 16.0, local: "부산", party: "기타", score: 66853.0},
{date: "2002/12", co: 16.0, local: "울산", party: "야당", score: 267737.0},
{date: "2002/12", co: 16.0, local: "울산", party: "여당", score: 178584.0},
{date: "2002/12", co: 16.0, local: "울산", party: "기타", score: 60001.0},
{date: "2002/12", co: 16.0, local: "경남", party: "야당", score: 1083564.0},
{date: "2002/12", co: 16.0, local: "경남", party: "여당", score: 434642.0},
{date: "2002/12", co: 16.0, local: "경남", party: "기타", score: 86538.0},
{date: "2002/12", co: 16.0, local: "대구", party: "야당", score: 1002164.0},
{date: "2002/12", co: 16.0, local: "대구", party: "여당", score: 240745.0},
{date: "2002/12", co: 16.0, local: "대구", party: "기타", score: 46000.0},
{date: "2002/12", co: 16.0, local: "경북", party: "야당", score: 1056446.0},
{date: "2002/12", co: 16.0, local: "경북", party: "여당", score: 311358.0},
{date: "2002/12", co: 16.0, local: "경북", party: "기타", score: 70134.0},
{date: "2002/12", co: 16.0, local: "제주", party: "야당", score: 105744.0},
{date: "2002/12", co: 16.0, local: "제주", party: "여당", score: 148423.0},
{date: "2002/12", co: 16.0, local: "제주", party: "기타", score: 14060.0},
{date: "1997/12", co: 15.0, local: "서울", party: "여당", score: 2394309.0},
{date: "1997/12", co: 15.0, local: "서울", party: "야당", score: 2627308.0},
{date: "1997/12", co: 15.0, local: "서울", party: "기타", score: 833156.0},
{date: "1997/12", co: 15.0, local: "인천", party: "여당", score: 470560.0},
{date: "1997/12", co: 15.0, local: "인천", party: "야당", score: 497839.0},
{date: "1997/12", co: 15.0, local: "인천", party: "기타", score: 324212.0},
{date: "1997/12", co: 15.0, local: "경기", party: "여당", score: 1612108.0},
{date: "1997/12", co: 15.0, local: "경기", party: "야당", score: 1781577.0},
{date: "1997/12", co: 15.0, local: "경기", party: "기타", score: 1141839.0},
{date: "1997/12", co: 15.0, local: "강원", party: "여당", score: 358921.0},
{date: "1997/12", co: 15.0, local: "강원", party: "야당", score: 197438.0},
{date: "1997/12", co: 15.0, local: "강원", party: "기타", score: 274584.0},
{date: "1997/12", co: 15.0, local: "대전", party: "여당", score: 199266.0},
{date: "1997/12", co: 15.0, local: "대전", party: "야당", score: 307493.0},
{date: "1997/12", co: 15.0, local: "대전", party: "기타", score: 176134.0},
{date: "1997/12", co: 15.0, local: "충남", party: "여당", score: 235457.0},
{date: "1997/12", co: 15.0, local: "충남", party: "야당", score: 483093.0},
{date: "1997/12", co: 15.0, local: "충남", party: "기타", score: 282648.0},
{date: "1997/12", co: 15.0, local: "충북", party: "여당", score: 243310.0},
{date: "1997/12", co: 15.0, local: "충북", party: "야당", score: 295666.0},
{date: "1997/12", co: 15.0, local: "충북", party: "기타", score: 250840.0},
{date: "1997/12", co: 15.0, local: "광주", party: "여당", score: 13294.0},
{date: "1997/12", co: 15.0, local: "광주", party: "야당", score: 754159.0},
{date: "1997/12", co: 15.0, local: "광주", party: "기타", score: 7746.0},
{date: "1997/12", co: 15.0, local: "전남", party: "여당", score: 41534.0},
{date: "1997/12", co: 15.0, local: "전남", party: "야당", score: 1231726.0},
{date: "1997/12", co: 15.0, local: "전남", party: "기타", score: 28576.0},
{date: "1997/12", co: 15.0, local: "전북", party: "여당", score: 53124.0},
{date: "1997/12", co: 15.0, local: "전북", party: "야당", score: 1078957.0},
{date: "1997/12", co: 15.0, local: "전북", party: "기타", score: 37108.0},
{date: "1997/12", co: 15.0, local: "부산", party: "여당", score: 1117069.0},
{date: "1997/12", co: 15.0, local: "부산", party: "야당", score: 320178.0},
{date: "1997/12", co: 15.0, local: "부산", party: "기타", score: 657159.0},
{date: "1997/12", co: 15.0, local: "울산", party: "여당", score: 268998.0},
{date: "1997/12", co: 15.0, local: "울산", party: "야당", score: 80751.0},
{date: "1997/12", co: 15.0, local: "울산", party: "기타", score: 174014.0},
{date: "1997/12", co: 15.0, local: "대구", party: "여당", score: 965907.0},
{date: "1997/12", co: 15.0, local: "대구", party: "야당", score: 166576.0},
{date: "1997/12", co: 15.0, local: "대구", party: "기타", score: 196605.0},
{date: "1997/12", co: 15.0, local: "경남", party: "여당", score: 908808.0},
{date: "1997/12", co: 15.0, local: "경남", party: "야당", score: 182102.0},
{date: "1997/12", co: 15.0, local: "경남", party: "기타", score: 557104.0},
{date: "1997/12", co: 15.0, local: "경북", party: "여당", score: 953360.0},
{date: "1997/12", co: 15.0, local: "경북", party: "야당", score: 210403.0},
{date: "1997/12", co: 15.0, local: "경북", party: "기타", score: 375845.0},
{date: "1997/12", co: 15.0, local: "제주", party: "여당", score: 100103.0},
{date: "1997/12", co: 15.0, local: "제주", party: "야당", score: 111009.0},
{date: "1997/12", co: 15.0, local: "제주", party: "기타", score: 62465.0},
{date: "1992/12", co: 14.0, local: "서울", party: "여당", score: 2167298.0},
{date: "1992/12", co: 14.0, local: "서울", party: "야당", score: 2246636.0},
{date: "1992/12", co: 14.0, local: "서울", party: "기타", score: 1537843.0},
{date: "1992/12", co: 14.0, local: "인천", party: "여당", score: 397361.0},
{date: "1992/12", co: 14.0, local: "인천", party: "야당", score: 338538.0},
{date: "1992/12", co: 14.0, local: "인천", party: "기타", score: 330389.0},
{date: "1992/12", co: 14.0, local: "경기", party: "여당", score: 1254025.0},
{date: "1992/12", co: 14.0, local: "경기", party: "야당", score: 1103498.0},
{date: "1992/12", co: 14.0, local: "경기", party: "기타", score: 1093872.0},
{date: "1992/12", co: 14.0, local: "강원", party: "여당", score: 340528.0},
{date: "1992/12", co: 14.0, local: "강원", party: "야당", score: 127265.0},
{date: "1992/12", co: 14.0, local: "강원", party: "기타", score: 352462.0},
{date: "1992/12", co: 14.0, local: "대전", party: "여당", score: 202137.0},
{date: "1992/12", co: 14.0, local: "대전", party: "야당", score: 165067.0},
{date: "1992/12", co: 14.0, local: "대전", party: "기타", score: 207199.0},
{date: "1992/12", co: 14.0, local: "충남", party: "여당", score: 351789.0},
{date: "1992/12", co: 14.0, local: "충남", party: "야당", score: 271921.0},
{date: "1992/12", co: 14.0, local: "충남", party: "기타", score: 328744.0},
{date: "1992/12", co: 14.0, local: "충북", party: "여당", score: 281678.0},
{date: "1992/12", co: 14.0, local: "충북", party: "야당", score: 191743.0},
{date: "1992/12", co: 14.0, local: "충북", party: "기타", score: 262750.0},
{date: "1992/12", co: 14.0, local: "광주", party: "여당", score: 14504.0},
{date: "1992/12", co: 14.0, local: "광주", party: "야당", score: 652337.0},
{date: "1992/12", co: 14.0, local: "광주", party: "기타", score: 13759.0},
{date: "1992/12", co: 14.0, local: "전남", party: "여당", score: 53360.0},
{date: "1992/12", co: 14.0, local: "전남", party: "야당", score: 1170398.0},
{date: "1992/12", co: 14.0, local: "전남", party: "기타", score: 46265.0},
{date: "1992/12", co: 14.0, local: "전북", party: "여당", score: 63175.0},
{date: "1992/12", co: 14.0, local: "전북", party: "야당", score: 991483.0},
{date: "1992/12", co: 14.0, local: "전북", party: "기타", score: 57692.0},
{date: "1992/12", co: 14.0, local: "부산", party: "여당", score: 1551473.0},
{date: "1992/12", co: 14.0, local: "부산", party: "야당", score: 265055.0},
{date: "1992/12", co: 14.0, local: "부산", party: "기타", score: 298861.0},
{date: "1992/12", co: 14.0, local: "경남", party: "여당", score: 1514043.0},
{date: "1992/12", co: 14.0, local: "경남", party: "야당", score: 193373.0},
{date: "1992/12", co: 14.0, local: "경남", party: "기타", score: 386174.0},
{date: "1992/12", co: 14.0, local: "대구", party: "여당", score: 690245.0},
{date: "1992/12", co: 14.0, local: "대구", party: "야당", score: 90641.0},
{date: "1992/12", co: 14.0, local: "대구", party: "기타", score: 377307.0},
{date: "1992/12", co: 14.0, local: "경북", party: "여당", score: 991424.0},
{date: "1992/12", co: 14.0, local: "경북", party: "야당", score: 147440.0},
{date: "1992/12", co: 14.0, local: "경북", party: "기타", score: 392773.0},
{date: "1992/12", co: 14.0, local: "제주", party: "여당", score: 104292.0},
{date: "1992/12", co: 14.0, local: "제주", party: "야당", score: 85889.0},
{date: "1992/12", co: 14.0, local: "제주", party: "기타", score: 70703.0},
{date: "1987/12", co: 13.0, local: "서울", party: "여당", score: 1682824.0},
{date: "1987/12", co: 13.0, local: "서울", party: "야당", score: 1637347.0},
{date: "1987/12", co: 13.0, local: "서울", party: "기타", score: 2298558.0},
{date: "1987/12", co: 13.0, local: "인천", party: "여당", score: 326186.0},
{date: "1987/12", co: 13.0, local: "인천", party: "야당", score: 248604.0},
{date: "1987/12", co: 13.0, local: "인천", party: "기타", score: 254070.0},
{date: "1987/12", co: 13.0, local: "경기", party: "여당", score: 1204235.0},
{date: "1987/12", co: 13.0, local: "경기", party: "야당", score: 800274.0},
{date: "1987/12", co: 13.0, local: "경기", party: "기타", score: 900814.0},
{date: "1987/12", co: 13.0, local: "강원", party: "여당", score: 546569.0},
{date: "1987/12", co: 13.0, local: "강원", party: "야당", score: 240585.0},
{date: "1987/12", co: 13.0, local: "강원", party: "기타", score: 134060.0},
{date: "1987/12", co: 13.0, local: "충남", party: "여당", score: 402491.0},
{date: "1987/12", co: 13.0, local: "충남", party: "야당", score: 246527.0},
{date: "1987/12", co: 13.0, local: "충남", party: "기타", score: 885888.0},
{date: "1987/12", co: 13.0, local: "충북", party: "여당", score: 355222.0},
{date: "1987/12", co: 13.0, local: "충북", party: "야당", score: 213851.0},
{date: "1987/12", co: 13.0, local: "충북", party: "기타", score: 188384.0},
{date: "1987/12", co: 13.0, local: "광주", party: "여당", score: 22943.0},
{date: "1987/12", co: 13.0, local: "광주", party: "야당", score: 2471.0},
{date: "1987/12", co: 13.0, local: "광주", party: "기타", score: 450739.0},
{date: "1987/12", co: 13.0, local: "전남", party: "여당", score: 119229.0},
{date: "1987/12", co: 13.0, local: "전남", party: "야당", score: 16826.0},
{date: "1987/12", co: 13.0, local: "전남", party: "기타", score: 1323815.0},
{date: "1987/12", co: 13.0, local: "전북", party: "여당", score: 160760.0},
{date: "1987/12", co: 13.0, local: "전북", party: "야당", score: 17130.0},
{date: "1987/12", co: 13.0, local: "전북", party: "기타", score: 959085.0},
{date: "1987/12", co: 13.0, local: "부산", party: "여당", score: 640622.0},
{date: "1987/12", co: 13.0, local: "부산", party: "야당", score: 111701.0},
{date: "1987/12", co: 13.0, local: "부산", party: "기타", score: 1242994.0},
{date: "1987/12", co: 13.0, local: "경남", party: "여당", score: 792757.0},
{date: "1987/12", co: 13.0, local: "경남", party: "야당", score: 987042.0},
{date: "1987/12", co: 13.0, local: "경남", party: "기타", score: 145613.0},
{date: "1987/12", co: 13.0, local: "대구", party: "여당", score: 800363.0},
{date: "1987/12", co: 13.0, local: "대구", party: "야당", score: 274880.0},
{date: "1987/12", co: 13.0, local: "대구", party: "기타", score: 56835.0},
{date: "1987/12", co: 13.0, local: "경북", party: "여당", score: 1108035.0},
{date: "1987/12", co: 13.0, local: "경북", party: "야당", score: 470189.0},
{date: "1987/12", co: 13.0, local: "경북", party: "기타", score: 90795.0},
{date: "1987/12", co: 13.0, local: "제주", party: "여당", score: 120502.0},
{date: "1987/12", co: 13.0, local: "제주", party: "야당", score: 64844.0},
{date: "1987/12", co: 13.0, local: "제주", party: "기타", score: 56752.0}
];

var popluation = 
{
"18": 40507842,
"17": 37653518,
"16": 34991529,
"15": 32290416,
"14": 28676547,
"13": 25127158    
};


var parseDate = d3.time.format("%Y/%m").parse;
data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.year = d.date.getFullYear() + '(' +  d.co.toString() + '대)';
});

function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

// set crossfilter
var ndx = crossfilter(data);
var yearDim = ndx.dimension(function(d) {return d.year;});
var scoreByYear = yearDim.group().reduceSum(function(d) {return d.score;});

var dateDim = ndx.dimension(function(d) {return d.date;});
var rateByYear = dateDim.group()
                            .reduceSum(function(d) {
                                // return d.co;
                                return 100 * d.score / popluation[d.co.toString()];
                            });

var opRatebyYear = dateDim.group()
                            .reduceSum(function(d) {
                                if (d.party==="야당") {
                                    return 100 * d.score / popluation[d.co.toString()];
                                } else{
                                    return 0;
                                }
                            });

var ppRatebyYear = dateDim.group()
                            .reduceSum(function(d) {
                                if (d.party==="여당") {
                                    return 100 * d.score / popluation[d.co.toString()];
                                } else{
                                    return 0;
                                }
                            });                          

var localDim  = ndx.dimension(function(d) {return d.local;});
var scoreByLocal = localDim.group().reduceSum(function(d) {return d.score;});

var partyDim  = ndx.dimension(function(d) {return d.party;});
var scoreByParty = partyDim.group().reduceSum(function(d) {return d.score;});

var localBarChart = dc.rowChart("#chart-bar-local");
    localBarChart.width(450)
                    .height(500)
                    .dimension(localDim)
                    .group(scoreByLocal)
                    .elasticX(true);

// var yearRingChart = dc.pieChart("#chart-ring-year");
//     yearRingChart.width(250)
//                     .height(300)
//                     .dimension(yearDim)
//                     .group(scoreByYear2)
//                     .innerRadius(50);

var lineChart = dc.lineChart("#chart-ring-year");
    lineChart.width(500)
                .height(300)
            // .renderArea(true)
                .transitionDuration(1000)
                .margins({top: 10, right: 10, bottom: 20, left: 40})
                .dimension(dateDim)
                // .mouseZoomable(true)
                
                .stack(opRatebyYear,"op")
                .stack(ppRatebyYear,"pp")   
                .group(rateByYear)
                .renderArea(true)
                .renderHorizontalGridLines(true)
                .x(d3.time.scale().domain([new Date(1986, 0, 1), new Date(2013, 11, 31)]))
                .y(d3.scale.linear().domain([1, 100]));
                // .elasticY(true);


var partyRingChart = dc.pieChart("#chart-ring-party");
    partyRingChart.width(200)
                    .height(300)
                    .dimension(partyDim)
                    .group(scoreByParty)
                    .innerRadius(50);

var dataTable = dc.dataTable("#chart-data-table");
    dataTable.width(600)
        .height(350)
        .dimension(yearDim)
        .group(function(d) {
            return "";
        })
        .size(20)
        .columns([
            function(d) {
                var format = d3.format("02d");
                return d.date.getFullYear() + "/" + format((d.date.getMonth() + 1));
            },
            function(d) {
                return d.co;
            },
            function(d) {
                return d.local;
            },
            function(d) {
                return d.party;
            },
            function(d) {
                return numberWithCommas(d.score);
            }
        ])
        .sortBy(function(d) {
            return d.local;
        })
        .order(d3.descending);


// spendHistChart
//     .width(300).height(200)
//     .dimension(spendDim)
//     .group(spendHist)
//     .x(d3.scale.linear().domain([0,10]))
//     .elasticY(true);

// spendHistChart.xAxis().tickFormat(function(d) {return d*10}); // convert back to base unit
// spendHistChart.yAxis().ticks(2);



dc.renderAll();

</script>
</body>
</html>
